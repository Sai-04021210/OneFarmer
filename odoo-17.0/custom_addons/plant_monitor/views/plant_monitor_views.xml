<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Plant Monitor Tree View -->
    <record id="view_plant_monitor_tree" model="ir.ui.view">
        <field name="name">plant.monitor.tree</field>
        <field name="model">plant.monitor</field>
        <field name="arch" type="xml">
            <tree string="Plant Monitor" decoration-success="health_status=='excellent'" 
                  decoration-warning="health_status=='fair'" decoration-danger="health_status in ['poor','critical']">
                <field name="name"/>
                <field name="plant_type"/>
                <field name="plant_variety"/>
                <field name="location"/>
                <field name="planting_date"/>
                <field name="status"/>
                <field name="substage"/>
                <field name="health_status"/>
                <field name="height"/>
                <field name="days_to_harvest"/>
                <field name="last_watered"/>
                <field name="log_count"/>
            </tree>
        </field>
    </record>

    <!-- Plant Monitor Form View -->
    <record id="view_plant_monitor_form" model="ir.ui.view">
        <field name="name">plant.monitor.form</field>
        <field name="model">plant.monitor</field>
        <field name="arch" type="xml">
            <form string="Plant Monitor">
                <header>
                    <button name="advance_to_next_stage" string="Advance Stage" type="object" 
                            class="btn-primary" invisible="status in ['harvested', 'dead']"/>
                    <button name="action_set_seedling" string="Set to Seedling" type="object" class="btn-secondary"/>
                    <button name="action_set_growing" string="Set to Growing" type="object" class="btn-secondary"/>
                    <button name="action_set_flowering" string="Set to Flowering" type="object" class="btn-secondary"/>
                    <button name="action_set_fruiting" string="Set to Fruiting" type="object" class="btn-secondary"/>
                    <button name="action_set_mature" string="Set to Mature" type="object" class="btn-secondary"/>
                    <button name="action_set_harvested" string="Set to Harvested" type="object" class="btn-secondary"/>
                    <field name="status" widget="statusbar" statusbar_visible="seed_prep,germination,seedling,transplant,vegetative,flowering,fruiting,ripening,mature,harvested"
                           options="{'clickable': '1'}"/>
                </header>
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button name="action_view_monitoring_logs" type="object" class="oe_stat_button" icon="fa-list-alt">
                            <field name="log_count" widget="statbutton" string="Logs"/>
                        </button>
                    </div>
                    
                    <div class="oe_title">
                        <h1>
                            <field name="name" placeholder="Plant Name"/>
                        </h1>
                        <h3>
                            <field name="scientific_name" placeholder="Scientific Name"/>
                        </h3>
                    </div>
                    
                    <group>
                        <group name="basic_info" string="Basic Information">
                            <field name="plant_type"/>
                            <field name="plant_variety"/>
                            <field name="substage"/>
                            <field name="health_status"/>
                            <field name="planting_date"/>
                            <field name="expected_harvest_date"/>
                            <field name="actual_harvest_date"/>
                        </group>
                        <group name="location_info" string="Location">
                            <field name="location"/>
                            <field name="plot_number"/>
                            <field name="coordinates"/>
                        </group>
                    </group>
                    
                    <group>
                        <group name="measurements" string="Current Measurements">
                            <field name="height"/>
                            <field name="width"/>
                            <field name="days_to_germination"/>
                            <field name="days_to_transplant"/>
                            <field name="days_to_flowering"/>
                            <field name="days_to_harvest"/>
                        </group>
                        <group name="care_info" string="Care Information">
                            <field name="watering_frequency"/>
                            <field name="watering_amount"/>
                            <field name="fertilizer_type"/>
                            <field name="fertilizer_schedule"/>
                            <field name="last_watered"/>
                            <field name="last_fertilized"/>
                        </group>
                    </group>
                    
                    <group>
                        <group name="cultivation_info" string="Cultivation Details">
                            <field name="sowing_medium" invisible="status not in ['seed_prep', 'germination']"/>
                            <field name="seed_depth" invisible="status not in ['seed_prep', 'germination']"/>
                            <field name="spacing_between_plants" invisible="status in ['seed_prep', 'germination']"/>
                            <field name="growing_season"/>
                        </group>
                        <group name="environment_info" string="Environmental Conditions">
                            <field name="soil_temperature" invisible="status in ['mature', 'harvested']"/>
                            <field name="ambient_temperature"/>
                            <field name="soil_ph" invisible="status in ['seed_prep', 'germination']"/>
                        </group>
                    </group>
                    
                    <!-- Stage-specific information -->
                    <group invisible="status not in ['flowering', 'fruiting', 'ripening', 'mature']">
                        <group name="harvest_info" string="Harvest Information">
                            <field name="expected_harvest_date"/>
                            <field name="actual_harvest_date" invisible="status not in ['mature', 'harvested']"/>
                        </group>
                    </group>
                    
                    <notebook>
                        <page string="Observations" name="observations">
                            <group>
                                <field name="observations" nolabel="1" placeholder="Recent observations about the plant..."/>
                            </group>
                        </page>
                        <page string="Notes" name="notes">
                            <group>
                                <field name="notes" nolabel="1" placeholder="General notes about the plant..."/>
                            </group>
                        </page>
                        <page string="Monitoring Logs" name="logs">
                            <field name="monitoring_logs">
                                <tree string="Monitoring Logs" editable="bottom">
                                    <field name="log_date"/>
                                    <field name="temperature"/>
                                    <field name="humidity"/>
                                    <field name="soil_moisture"/>
                                    <field name="height"/>
                                    <field name="health_status"/>
                                    <field name="watered"/>
                                    <field name="fertilized"/>
                                    <field name="notes"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids"/>
                    <field name="activity_ids"/>
                    <field name="message_ids"/>
                </div>
            </form>
        </field>
    </record>

    <!-- Plant Monitor Kanban View -->
    <record id="view_plant_monitor_kanban" model="ir.ui.view">
        <field name="name">plant.monitor.kanban</field>
        <field name="model">plant.monitor</field>
        <field name="arch" type="xml">
            <kanban default_group_by="status" class="o_kanban_small_column">
                <field name="name"/>
                <field name="plant_type"/>
                <field name="health_status"/>
                <field name="status"/>
                <field name="location"/>
                <field name="height"/>
                <field name="planting_date"/>
                <templates>
                    <t t-name="kanban-box">
                        <div t-attf-class="oe_kanban_card oe_kanban_global_click">
                            <div class="o_kanban_card_header">
                                <div class="o_kanban_card_header_title">
                                    <div class="o_primary"><strong><field name="name"/></strong></div>
                                    <div class="o_secondary"><field name="plant_type"/></div>
                                </div>
                            </div>
                            <div class="o_kanban_card_content">
                                <div class="o_kanban_card_manage_pane">
                                    <div>Location: <field name="location"/></div>
                                    <div>Health: <field name="health_status"/></div>
                                    <div>Height: <field name="height"/> cm</div>
                                    <div>Planted: <field name="planting_date"/></div>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <!-- Plant Monitoring Log Tree View -->
    <record id="view_plant_monitoring_log_tree" model="ir.ui.view">
        <field name="name">plant.monitoring.log.tree</field>
        <field name="model">plant.monitoring.log</field>
        <field name="arch" type="xml">
            <tree string="Monitoring Logs" editable="top">
                <field name="plant_id"/>
                <field name="log_date"/>
                <field name="temperature"/>
                <field name="humidity"/>
                <field name="soil_moisture"/>
                <field name="light_level"/>
                <field name="height"/>
                <field name="health_status"/>
                <field name="watered"/>
                <field name="fertilized"/>
                <field name="pest_issues"/>
                <field name="disease_issues"/>
            </tree>
        </field>
    </record>

    <!-- Plant Monitoring Log Form View -->
    <record id="view_plant_monitoring_log_form" model="ir.ui.view">
        <field name="name">plant.monitoring.log.form</field>
        <field name="model">plant.monitoring.log</field>
        <field name="arch" type="xml">
            <form string="Monitoring Log">
                <sheet>
                    <group>
                        <group>
                            <field name="plant_id"/>
                            <field name="log_date"/>
                            <field name="log_time"/>
                        </group>
                        <group>
                            <field name="health_status"/>
                            <field name="height"/>
                            <field name="width"/>
                        </group>
                    </group>
                    
                    <group string="Environmental Data">
                        <group>
                            <field name="temperature"/>
                            <field name="humidity"/>
                        </group>
                        <group>
                            <field name="soil_moisture"/>
                            <field name="light_level"/>
                        </group>
                    </group>
                    
                    <group string="Activities">
                        <group>
                            <field name="watered"/>
                            <field name="fertilized"/>
                        </group>
                        <group>
                            <field name="pruned"/>
                            <field name="pest_issues"/>
                            <field name="disease_issues"/>
                        </group>
                    </group>
                    
                    <group string="Photo">
                        <field name="image" widget="image" class="oe_avatar"/>
                    </group>
                    
                    <group string="Notes">
                        <field name="notes" nolabel="1" placeholder="Add notes about this monitoring session..."/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Actions -->
    <record id="action_plant_monitor" model="ir.actions.act_window">
        <field name="name">Plant Monitor</field>
        <field name="res_model">plant.monitor</field>
        <field name="view_mode">kanban,tree,form</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Create your first plant to monitor!
            </p>
            <p>
                Track your plants' growth, health, and care activities.
            </p>
        </field>
    </record>

    <record id="action_plant_monitoring_log" model="ir.actions.act_window">
        <field name="name">Monitoring Logs</field>
        <field name="res_model">plant.monitoring.log</field>
        <field name="view_mode">tree,form</field>
        <field name="context">{'search_default_today': 1}</field>
    </record>

</odoo>